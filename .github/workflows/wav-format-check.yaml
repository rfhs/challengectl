name: WAV format check

on:
  push:
    paths:
      - 'flags-archive/**'
jobs:
  wav-format-check:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: List added files
      run: git diff-tree --no-commit-id --name-only -r ${{ github.sha }}
    
    - name: WAV format check
      run: |
        sudo apt-get install --no-install-recommends libimage-exiftool-perl -y
        ./qa/wav-format-check $(git diff-tree --no-commit-id --name-only -r ${{ github.sha }} | grep -E '^(flags-archive/)')
