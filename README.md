# challengectl v2

Everthing is gonna be broken in this branch for a few weeks while I work on stuff. Don't even try to use it til this message is gone.

## TODO:
- [ ] Convert Config Files to YAML
  - [x] Create YAML Structure
  - [ ] UpdateCode to Parse YAML
- [ ] Implement a test mode
- [ ] Update USB Flowgraph to SSB (Both LSB and USB Capable)
  - [x] Finish GRC Flowgraph
  - [ ] Integrate into code
- [ ] Include Source Flowgraphs when possible
  - [ ] NBFM
  - [x] SSB
  - [x] FreeDV
  - [ ] POCSAG
  - [ ] Paint
  - [ ] CW - Potentially possible, TBD
  - [ ] ASK - Likely not possible
  - [x] Freq Hopper
  - [ ] LRS (Dan?)
- [ ] Change code to use unmodified GNU Radio Generated Python
- [ ] Add FreeDV Challenge
  - [x] Finish GRC Flowgraph
  - [ ] Integrate into code
- [ ] Add Freq-hop challenge
  - [x] Finish GRC Flowgraph
  - [ ] Integrate into code
- [ ] Update documention for new YAML format and new challenges
- [ ] Integrate Device Enumeration
- [ ] Implemet WebUI

# challengectl
Queues challenges and gr-osmosdr radios to transmit for the RFCTF

```
$ python challengectl.py -h
usage: challengectl.py [-h] [-v] flagfile devicefile

A script to run SDR challenges on multiple SDR devices.

positional arguments:
  flagfile       Flags file
  devicefile     Devices file

options:
  -h, --help     show this help message and exit
  -v, --verbose
```

## Flags File
The flags file is a csv file, with the first line containing the conference name, and start and end times. After the first line, add one line per challenge, using the format shown below.
```
conference,starttime,endtime
chal_id,chal_name,flag,module,modopt1,modopt2,minwait,maxwait,freq1,freq2,freq3
```
The flags-archive directory contains example flags files from previous RFCTF events.

## Devices File
The devices file is a csv file, with one line per SDR device. Each line begins with a 0 based index, and the device string for each device to be used by challengectl.
```
dev_id,osmosdr_device_string
0,"bladerf=longhexserialnumberhere,biastee=1"
```
`create-devices-txt.py` will attempt to detect supported devices on your system, and automatically output a devices.txt file with a line for each of those devices.

### Supported Devices
Any transmit capable device that can be used to transmit using a GNURadio gr-osmosdr sink *should* work, however only the following devices have been tested so far.
- [Nuand bladeRF 2.0](https://www.nuand.com/bladerf-2-0-micro/)
- [Ettus USRP B200](https://www.ettus.com/all-products/ub200-kit/)
- [Great Scott Gadgets HackRF One](https://greatscottgadgets.com/hackrf/one/)

# Challenges
**spectrum_paint.py** Paints an image using [gr-paint](https://github.com/drmpeg/gr-paint)<br/>
**ask.py** Transmits Amplitude Shift Keying challenges<br/>
**cw.py** Transmits CW / Morse Code challenges<br/>
**nbfm.py** Transmits Narrowband Frequency Modulation<br/>
**usb_tx.py** Transmits Upper Sideband<br/>
**lrs_pager.py** Generates a pager.bin file to be transmitted by lrs_tx.py. This code is based on [github.com/tony-tiger/lrs](https://github.com/tony-tiger/lrs)<br/>
**lrs_tx.py** Transmits an LRS signal, based on a pager.bin file generated by lrs_pager.py<br/>
**pocsagtx_osmocom.py** Transmits POCSAG messages using [gr-mixalot](https://github.com/unsynchronized/gr-mixalot)<br/>